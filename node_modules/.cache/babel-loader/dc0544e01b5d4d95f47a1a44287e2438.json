{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}(); // Internal Imports\n\n\nimport { Component } from '../component';\nimport { DOMUtils } from '../../services';\nimport { Events, Roles, ColorClassNameTypes } from '../../interfaces';\nimport { Tools } from '../../tools';\nimport { radialLabelPlacement, radToDeg, polarToCartesianCoords, distanceBetweenPointOnCircAndVerticalDiameter } from '../../services/angle-utils';\nimport * as Configuration from '../../configuration'; // D3 Imports\n\nimport { select } from 'd3-selection';\nimport { scaleBand, scaleLinear } from 'd3-scale';\nimport { max, extent } from 'd3-array';\nimport { lineRadial, curveLinearClosed } from 'd3-shape'; // used to make transitions\n\nvar oldYScale;\n\nvar Radar =\n/** @class */\nfunction (_super) {\n  __extends(Radar, _super);\n\n  function Radar() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'radar'; // append temporarily the label to get the exact space that it occupies\n\n    _this.getLabelDimensions = function (label) {\n      var tmpTick = DOMUtils.appendOrSelect(_this.getContainerSVG(), \"g.tmp-tick\");\n      var tmpTickText = DOMUtils.appendOrSelect(tmpTick, \"text\").text(label);\n\n      var _a = DOMUtils.getSVGElementSize(tmpTickText.node(), {\n        useBBox: true\n      }),\n          width = _a.width,\n          height = _a.height;\n\n      tmpTick.remove();\n      return {\n        width: width,\n        height: height\n      };\n    }; // Given a flat array of objects, if there are missing data on key,\n    // creates corresponding data with value = null\n\n\n    _this.normalizeFlatData = function (dataset) {\n      var options = _this.getOptions();\n\n      var _a = Tools.getProperty(options, 'radar', 'axes'),\n          angle = _a.angle,\n          value = _a.value;\n\n      var groupMapsTo = Tools.getProperty(options, 'data', 'groupMapsTo');\n      var completeBlankData = Tools.flatMapDeep(_this.uniqueKeys.map(function (key) {\n        return _this.uniqueGroups.map(function (group) {\n          var _a;\n\n          return _a = {}, _a[angle] = key, _a[groupMapsTo] = group, _a[value] = null, _a;\n        });\n      }));\n      return Tools.merge(completeBlankData, dataset);\n    }; // Given a a grouped array of objects, if there are missing data on key,\n    // creates corresponding data with value = null\n\n\n    _this.normalizeGroupedData = function (dataset) {\n      var options = _this.getOptions();\n\n      var _a = Tools.getProperty(options, 'radar', 'axes'),\n          angle = _a.angle,\n          value = _a.value;\n\n      var groupMapsTo = Tools.getProperty(options, 'data', 'groupMapsTo');\n      return dataset.map(function (_a) {\n        var name = _a.name,\n            data = _a.data;\n\n        var completeBlankData = _this.uniqueKeys.map(function (k) {\n          var _a;\n\n          return _a = {}, _a[groupMapsTo] = name, _a[angle] = k, _a[value] = null, _a;\n        });\n\n        return {\n          name: name,\n          data: Tools.merge(completeBlankData, data)\n        };\n      });\n    };\n\n    _this.handleLegendOnHover = function (event) {\n      var hoveredElement = event.detail.hoveredElement;\n\n      _this.parent.selectAll('g.blobs path').transition(_this.services.transitions.getTransition('legend-hover-blob')).style('fill-opacity', function (group) {\n        if (group.name !== hoveredElement.datum().name) {\n          return Configuration.radar.opacity.unselected;\n        }\n\n        return Configuration.radar.opacity.selected;\n      }).style('stroke-opacity', function (group) {\n        if (group.name !== hoveredElement.datum().name) {\n          return Configuration.radar.opacity.unselected;\n        }\n\n        return 1;\n      });\n    };\n\n    _this.handleLegendMouseOut = function (event) {\n      _this.parent.selectAll('g.blobs path').transition(_this.services.transitions.getTransition('legend-mouseout-blob')).style('fill-opacity', Configuration.radar.opacity.selected).style('stroke-opacity', 1);\n    };\n\n    return _this;\n  }\n\n  Radar.prototype.init = function () {\n    var events = this.services.events; // Highlight correct line legend item hovers\n\n    events.addEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover); // Un-highlight lines on legend item mouseouts\n\n    events.addEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n  };\n\n  Radar.prototype.render = function (animate) {\n    var _this = this;\n\n    if (animate === void 0) {\n      animate = true;\n    }\n\n    var svg = this.getContainerSVG();\n\n    var _a = DOMUtils.getSVGElementSize(this.parent, {\n      useAttrs: true\n    }),\n        width = _a.width,\n        height = _a.height;\n\n    var data = this.model.getData();\n    var displayData = this.model.getDisplayData();\n    var groupedData = this.model.getGroupedData();\n    var options = this.getOptions();\n\n    var _b = Tools.getProperty(options, 'radar', 'axes'),\n        angle = _b.angle,\n        value = _b.value;\n\n    var groupMapsTo = Tools.getProperty(options, 'data', 'groupMapsTo');\n    var _c = Configuration.radar,\n        xLabelPadding = _c.xLabelPadding,\n        yLabelPadding = _c.yLabelPadding,\n        yTicksNumber = _c.yTicksNumber,\n        minRange = _c.minRange,\n        xAxisRectHeight = _c.xAxisRectHeight;\n    this.uniqueKeys = Array.from(new Set(data.map(function (d) {\n      return d[angle];\n    })));\n    this.uniqueGroups = Array.from(new Set(data.map(function (d) {\n      return d[groupMapsTo];\n    })));\n    this.displayDataNormalized = this.normalizeFlatData(displayData);\n    this.groupedDataNormalized = this.normalizeGroupedData(groupedData);\n    var labelHeight = this.getLabelDimensions(this.uniqueKeys[0]).height;\n    var margin = 2 * (labelHeight + yLabelPadding);\n    var size = Math.min(width, height);\n    var diameter = size - margin;\n    var radius = diameter / 2;\n\n    if (radius <= 0) {\n      return;\n    } // given a key, return the corresponding angle in radiants\n    // rotated by -PI/2 because we want angle 0° at -y (12 o’clock)\n\n\n    var xScale = scaleBand().domain(this.displayDataNormalized.map(function (d) {\n      return d[angle];\n    })).range([0, 2 * Math.PI].map(function (a) {\n      return a - Math.PI / 2;\n    }));\n    var yScale = scaleLinear().domain([0, max(this.displayDataNormalized.map(function (d) {\n      return d[value];\n    }))]).range([minRange, radius]).nice(yTicksNumber);\n    var yTicks = yScale.ticks(yTicksNumber);\n\n    var colorScale = function colorScale(group) {\n      return _this.model.getFillColor(group);\n    }; // constructs a new radial line generator\n    // the angle accessor returns the angle in radians with 0° at -y (12 o’clock)\n    // so map back the angle\n\n\n    var radialLineGenerator = lineRadial().angle(function (d) {\n      return xScale(d[angle]) + Math.PI / 2;\n    }).radius(function (d) {\n      return yScale(d[value]);\n    }).curve(curveLinearClosed); // this line generator is necessary in order to make a transition of a value from the\n    // position it occupies using the old scale to the position it occupies using the new scale\n\n    var oldRadialLineGenerator = lineRadial().angle(radialLineGenerator.angle()).radius(function (d) {\n      return oldYScale ? oldYScale(d[value]) : minRange;\n    }).curve(radialLineGenerator.curve()); // compute the space that each x label needs\n\n    var horizSpaceNeededByEachXLabel = this.uniqueKeys.map(function (key) {\n      var tickWidth = _this.getLabelDimensions(key).width; // compute the distance between the point that the label rapresents and the vertical diameter\n\n\n      var distanceFromDiameter = distanceBetweenPointOnCircAndVerticalDiameter(xScale(key), radius); // the space each label occupies is the sum of these two values\n\n      return tickWidth + distanceFromDiameter;\n    });\n    var leftPadding = max(horizSpaceNeededByEachXLabel); // center coordinates\n\n    var c = {\n      x: leftPadding + xLabelPadding,\n      y: height / 2\n    }; /////////////////////////////\n    // Drawing the radar\n    /////////////////////////////\n    // y axes\n\n    var yAxes = DOMUtils.appendOrSelect(svg, 'g.y-axes').attr('role', Roles.GROUP);\n    var yAxisUpdate = yAxes.selectAll('path').data(yTicks, function (tick) {\n      return tick;\n    }); // for each tick, create array of data corresponding to the points composing the shape\n\n    var shapeData = function shapeData(tick) {\n      return _this.uniqueKeys.map(function (key) {\n        var _a;\n\n        return _a = {}, _a[angle] = key, _a[value] = tick, _a;\n      });\n    };\n\n    yAxisUpdate.join(function (enter) {\n      return enter.append('path').attr('role', Roles.GRAPHICS_SYMBOL).attr('opacity', 0).attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\").attr('fill', 'none').attr('d', function (tick) {\n        return oldRadialLineGenerator(shapeData(tick));\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_y_axes_enter', animate)).attr('opacity', 1).attr('d', function (tick) {\n          return radialLineGenerator(shapeData(tick));\n        });\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_y_axes_update', animate)).attr('opacity', 1).attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\").attr('d', function (tick) {\n          return radialLineGenerator(shapeData(tick));\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_y_axes_exit', animate)).attr('d', function (tick) {\n          return radialLineGenerator(shapeData(tick));\n        }).attr('opacity', 0).remove();\n      });\n    }); // x axes\n\n    var xAxes = DOMUtils.appendOrSelect(svg, 'g.x-axes').attr('role', Roles.GROUP);\n    var xAxisUpdate = xAxes.selectAll('line').data(this.uniqueKeys, function (key) {\n      return key;\n    });\n    xAxisUpdate.join(function (enter) {\n      return enter.append('line').attr('role', Roles.GRAPHICS_SYMBOL).attr('opacity', 0).attr('class', function (key) {\n        return \"x-axis-\" + Tools.kebabCase(key);\n      }) // replace spaces with -\n      .attr('stroke-dasharray', '0').attr('x1', function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).x;\n      }).attr('y1', function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).y;\n      }).attr('x2', function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).x;\n      }).attr('y2', function (key) {\n        return polarToCartesianCoords(xScale(key), 0, c).y;\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_x_axes_enter', animate)).attr('opacity', 1).attr('x1', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n        }).attr('y1', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n        }).attr('x2', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n        }).attr('y2', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n        });\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_x_axes_update', animate)).attr('opacity', 1).attr('x1', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n        }).attr('y1', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n        }).attr('x2', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n        }).attr('y2', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_x_axes_exit', animate)).attr('opacity', 0).remove();\n      });\n    }); // x labels\n\n    var xLabels = DOMUtils.appendOrSelect(svg, 'g.x-labels').attr('role', Roles.GROUP);\n    var xLabelUpdate = xLabels.selectAll('text').data(this.uniqueKeys);\n    xLabelUpdate.join(function (enter) {\n      return enter.append('text').text(function (key) {\n        return key;\n      }).attr('opacity', 0).attr('x', function (key) {\n        return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n      }).attr('y', function (key) {\n        return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n      }).style('text-anchor', function (key) {\n        return radialLabelPlacement(xScale(key)).textAnchor;\n      }).style('dominant-baseline', function (key) {\n        return radialLabelPlacement(xScale(key)).dominantBaseline;\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_x_labels_enter', animate)).attr('opacity', 1);\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_x_labels_update', animate)).attr('opacity', 1).attr('x', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n        }).attr('y', function (key) {\n          return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_x_labels_exit', animate)).attr('opacity', 0).remove();\n      });\n    }); // blobs\n\n    var blobs = DOMUtils.appendOrSelect(svg, 'g.blobs').attr('role', Roles.GROUP);\n    var blobUpdate = blobs.selectAll('path').data(this.groupedDataNormalized, function (group) {\n      return group.name;\n    });\n    blobUpdate.join(function (enter) {\n      return enter.append('path').attr('class', function (group) {\n        return _this.model.getColorClassName({\n          classNameTypes: [ColorClassNameTypes.FILL, ColorClassNameTypes.STROKE],\n          dataGroupName: group.name,\n          originalClassName: 'blob'\n        });\n      }).attr('role', Roles.GRAPHICS_SYMBOL).attr('opacity', 0).attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\").style('fill', function (group) {\n        return colorScale(group.name);\n      }).style('fill-opacity', Configuration.radar.opacity.selected).style('stroke', function (group) {\n        return colorScale(group.name);\n      }).attr('d', function (group) {\n        return oldRadialLineGenerator(group.data);\n      }).call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_blobs_enter', animate)).attr('opacity', 1).attr('d', function (group) {\n          return radialLineGenerator(group.data);\n        });\n      });\n    }, function (update) {\n      update.attr('class', function (group) {\n        return _this.model.getColorClassName({\n          classNameTypes: [ColorClassNameTypes.FILL, ColorClassNameTypes.STROKE],\n          dataGroupName: group.name,\n          originalClassName: 'blob'\n        });\n      }).style('fill', function (group) {\n        return colorScale(group.name);\n      }).style('stroke', function (group) {\n        return colorScale(group.name);\n      });\n      update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_blobs_update', animate)).attr('opacity', 1).attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\").attr('d', function (group) {\n          return radialLineGenerator(group.data);\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_blobs_exit', animate)).attr('d', function (group) {\n          return radialLineGenerator(group.data);\n        }).attr('opacity', 0).remove();\n      });\n    }); // data dots\n\n    var dots = DOMUtils.appendOrSelect(svg, 'g.dots').attr('role', Roles.GROUP);\n    var dotsUpdate = dots.selectAll('circle').data(this.displayDataNormalized);\n    dotsUpdate.join(function (enter) {\n      return enter.append('circle').attr('role', Roles.GRAPHICS_SYMBOL);\n    }, function (update) {\n      return update;\n    }, function (exit) {\n      return exit.remove();\n    }).attr('class', function (d) {\n      return _this.model.getColorClassName({\n        classNameTypes: [ColorClassNameTypes.FILL],\n        dataGroupName: d[groupMapsTo],\n        originalClassName: Tools.kebabCase(d[angle])\n      });\n    }).attr('cx', function (d) {\n      return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).x;\n    }).attr('cy', function (d) {\n      return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).y;\n    }).attr('r', 0).attr('opacity', 0).style('fill', function (d) {\n      return colorScale(d[groupMapsTo]);\n    }); // rectangles\n\n    var xAxesRect = DOMUtils.appendOrSelect(svg, 'g.x-axes-rect').attr('role', Roles.GROUP);\n    var xAxisRectUpdate = xAxesRect.selectAll('rect').data(this.uniqueKeys);\n    xAxisRectUpdate.join(function (enter) {\n      return enter.append('rect').attr('role', Roles.GRAPHICS_SYMBOL);\n    }, function (update) {\n      return update;\n    }, function (exit) {\n      return exit.remove();\n    }).attr('x', c.x).attr('y', c.y - xAxisRectHeight / 2).attr('width', yScale.range()[1]).attr('height', xAxisRectHeight).style('fill', 'red').style('fill-opacity', 0).attr('transform', function (key) {\n      return \"rotate(\" + radToDeg(xScale(key)) + \", \" + c.x + \", \" + c.y + \")\";\n    }); // y labels (show only the min and the max labels)\n\n    var yLabels = DOMUtils.appendOrSelect(svg, 'g.y-labels').attr('role', Roles.GROUP);\n    var yLabelUpdate = yLabels.selectAll('text').data(extent(yTicks));\n    yLabelUpdate.join(function (enter) {\n      return enter.append('text').attr('opacity', 0).text(function (tick) {\n        return tick;\n      }).attr('x', function (tick) {\n        return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n      }).attr('y', function (tick) {\n        return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n      }).style('text-anchor', 'start').style('dominant-baseline', 'middle').call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_y_labels_enter', animate)).attr('opacity', 1);\n      });\n    }, function (update) {\n      return update.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_y_labels_update', animate)).text(function (tick) {\n          return tick;\n        }).attr('opacity', 1).attr('x', function (tick) {\n          return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n        }).attr('y', function (tick) {\n          return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n        });\n      });\n    }, function (exit) {\n      return exit.call(function (selection) {\n        return selection.transition(_this.services.transitions.getTransition('radar_y_labels_exit', animate)).attr('opacity', 0).remove();\n      });\n    });\n    var alignment = Tools.getProperty(options, 'radar', 'alignment');\n    var alignmentOffset = DOMUtils.getAlignmentOffset(alignment, svg, this.getParent());\n    svg.attr('transform', \"translate(\" + alignmentOffset + \", 0)\"); // Add event listeners\n\n    this.addEventListeners();\n    oldYScale = yScale; // save the current scale as the old one\n  };\n\n  Radar.prototype.destroy = function () {\n    // Remove event listeners\n    this.parent.selectAll('.x-axes-rect > rect').on('mouseover', null).on('mousemove', null).on('mouseout', null); // Remove legend listeners\n\n    var eventsFragment = this.services.events;\n    eventsFragment.removeEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n    eventsFragment.removeEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n  };\n\n  Radar.prototype.addEventListeners = function () {\n    var self = this;\n    var angle = Tools.getProperty(this.getOptions(), 'radar').axes.angle; // events on x axes rects\n\n    this.parent.selectAll('.x-axes-rect > rect').on('mouseover', function (datum) {\n      var hoveredElement = select(this); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOVER, {\n        element: hoveredElement,\n        datum: datum\n      });\n      var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n      var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum)); // Change style\n\n      axisLine.classed('hovered', true).attr('stroke-dasharray', '4 4');\n      dots.classed('hovered', true).attr('opacity', 1).attr('r', Configuration.radar.dotsRadius); // get the items that should be highlighted\n\n      var itemsToHighlight = self.displayDataNormalized.filter(function (d) {\n        return d[angle] === datum;\n      });\n      var options = self.getOptions();\n      var groupMapsTo = options.data.groupMapsTo;\n      var valueMapsTo = Tools.getProperty(options, 'radar', 'axes', 'value'); // Show tooltip\n\n      self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n        hoveredElement: hoveredElement,\n        items: itemsToHighlight.filter(function (datum) {\n          return typeof datum[valueMapsTo] === 'number';\n        }).map(function (datum) {\n          return {\n            label: datum[groupMapsTo],\n            value: datum[valueMapsTo],\n            color: self.model.getFillColor(datum[groupMapsTo]),\n            class: self.model.getColorClassName({\n              classNameTypes: [ColorClassNameTypes.TOOLTIP],\n              dataGroupName: datum[groupMapsTo]\n            })\n          };\n        })\n      });\n    }).on('mousemove', function (datum) {\n      var hoveredElement = select(this); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEMOVE, {\n        element: hoveredElement,\n        datum: datum\n      });\n      self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n    }).on('click', function (datum) {\n      // Dispatch mouse event\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_CLICK, {\n        element: select(this),\n        datum: datum\n      });\n    }).on('mouseout', function (datum) {\n      var hoveredElement = select(this);\n      var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n      var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum)); // Change style\n\n      axisLine.classed('hovered', false).attr('stroke-dasharray', '0');\n      dots.classed('hovered', false).attr('opacity', 0).attr('r', 0); // Dispatch mouse event\n\n      self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOUT, {\n        element: hoveredElement,\n        datum: datum\n      }); // Hide tooltip\n\n      self.services.events.dispatchEvent(Events.Tooltip.HIDE);\n    });\n  };\n\n  return Radar;\n}(Component);\n\nexport { Radar };","map":{"version":3,"sources":["/Users/zander/Documents/Development/ActionsLogging/Dashboard/node_modules/@carbon/charts/components/graphs/radar.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Component","DOMUtils","Events","Roles","ColorClassNameTypes","Tools","radialLabelPlacement","radToDeg","polarToCartesianCoords","distanceBetweenPointOnCircAndVerticalDiameter","Configuration","select","scaleBand","scaleLinear","max","extent","lineRadial","curveLinearClosed","oldYScale","Radar","_super","_this","apply","arguments","type","getLabelDimensions","label","tmpTick","appendOrSelect","getContainerSVG","tmpTickText","text","_a","getSVGElementSize","node","useBBox","width","height","remove","normalizeFlatData","dataset","options","getOptions","getProperty","angle","value","groupMapsTo","completeBlankData","flatMapDeep","uniqueKeys","map","key","uniqueGroups","group","merge","normalizeGroupedData","name","data","k","handleLegendOnHover","event","hoveredElement","detail","parent","selectAll","transition","services","transitions","getTransition","style","datum","radar","opacity","unselected","selected","handleLegendMouseOut","init","events","addEventListener","Legend","ITEM_HOVER","ITEM_MOUSEOUT","render","animate","svg","useAttrs","model","getData","displayData","getDisplayData","groupedData","getGroupedData","_b","_c","xLabelPadding","yLabelPadding","yTicksNumber","minRange","xAxisRectHeight","from","Set","displayDataNormalized","groupedDataNormalized","labelHeight","margin","size","Math","min","diameter","radius","xScale","domain","range","PI","a","yScale","nice","yTicks","ticks","colorScale","getFillColor","radialLineGenerator","curve","oldRadialLineGenerator","horizSpaceNeededByEachXLabel","tickWidth","distanceFromDiameter","leftPadding","c","x","y","yAxes","attr","GROUP","yAxisUpdate","tick","shapeData","join","enter","append","GRAPHICS_SYMBOL","call","selection","update","exit","xAxes","xAxisUpdate","kebabCase","xLabels","xLabelUpdate","textAnchor","dominantBaseline","blobs","blobUpdate","getColorClassName","classNameTypes","FILL","STROKE","dataGroupName","originalClassName","dots","dotsUpdate","xAxesRect","xAxisRectUpdate","yLabels","yLabelUpdate","alignment","alignmentOffset","getAlignmentOffset","getParent","addEventListeners","destroy","on","eventsFragment","removeEventListener","self","axes","dispatchEvent","X_AXIS_MOUSEOVER","element","axisLine","classed","dotsRadius","itemsToHighlight","filter","valueMapsTo","Tooltip","SHOW","items","color","class","TOOLTIP","X_AXIS_MOUSEMOVE","MOVE","X_AXIS_CLICK","X_AXIS_MOUSEOUT","HIDE"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// Internal Imports\nimport { Component } from '../component';\nimport { DOMUtils } from '../../services';\nimport { Events, Roles, ColorClassNameTypes } from '../../interfaces';\nimport { Tools } from '../../tools';\nimport { radialLabelPlacement, radToDeg, polarToCartesianCoords, distanceBetweenPointOnCircAndVerticalDiameter, } from '../../services/angle-utils';\nimport * as Configuration from '../../configuration';\n// D3 Imports\nimport { select } from 'd3-selection';\nimport { scaleBand, scaleLinear } from 'd3-scale';\nimport { max, extent } from 'd3-array';\nimport { lineRadial, curveLinearClosed } from 'd3-shape';\n// used to make transitions\nvar oldYScale;\nvar Radar = /** @class */ (function (_super) {\n    __extends(Radar, _super);\n    function Radar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'radar';\n        // append temporarily the label to get the exact space that it occupies\n        _this.getLabelDimensions = function (label) {\n            var tmpTick = DOMUtils.appendOrSelect(_this.getContainerSVG(), \"g.tmp-tick\");\n            var tmpTickText = DOMUtils.appendOrSelect(tmpTick, \"text\").text(label);\n            var _a = DOMUtils.getSVGElementSize(tmpTickText.node(), { useBBox: true }), width = _a.width, height = _a.height;\n            tmpTick.remove();\n            return { width: width, height: height };\n        };\n        // Given a flat array of objects, if there are missing data on key,\n        // creates corresponding data with value = null\n        _this.normalizeFlatData = function (dataset) {\n            var options = _this.getOptions();\n            var _a = Tools.getProperty(options, 'radar', 'axes'), angle = _a.angle, value = _a.value;\n            var groupMapsTo = Tools.getProperty(options, 'data', 'groupMapsTo');\n            var completeBlankData = Tools.flatMapDeep(_this.uniqueKeys.map(function (key) {\n                return _this.uniqueGroups.map(function (group) {\n                    var _a;\n                    return (_a = {},\n                        _a[angle] = key,\n                        _a[groupMapsTo] = group,\n                        _a[value] = null,\n                        _a);\n                });\n            }));\n            return Tools.merge(completeBlankData, dataset);\n        };\n        // Given a a grouped array of objects, if there are missing data on key,\n        // creates corresponding data with value = null\n        _this.normalizeGroupedData = function (dataset) {\n            var options = _this.getOptions();\n            var _a = Tools.getProperty(options, 'radar', 'axes'), angle = _a.angle, value = _a.value;\n            var groupMapsTo = Tools.getProperty(options, 'data', 'groupMapsTo');\n            return dataset.map(function (_a) {\n                var name = _a.name, data = _a.data;\n                var completeBlankData = _this.uniqueKeys.map(function (k) {\n                    var _a;\n                    return (_a = {},\n                        _a[groupMapsTo] = name,\n                        _a[angle] = k,\n                        _a[value] = null,\n                        _a);\n                });\n                return { name: name, data: Tools.merge(completeBlankData, data) };\n            });\n        };\n        _this.handleLegendOnHover = function (event) {\n            var hoveredElement = event.detail.hoveredElement;\n            _this.parent\n                .selectAll('g.blobs path')\n                .transition(_this.services.transitions.getTransition('legend-hover-blob'))\n                .style('fill-opacity', function (group) {\n                if (group.name !== hoveredElement.datum().name) {\n                    return Configuration.radar.opacity.unselected;\n                }\n                return Configuration.radar.opacity.selected;\n            })\n                .style('stroke-opacity', function (group) {\n                if (group.name !== hoveredElement.datum().name) {\n                    return Configuration.radar.opacity.unselected;\n                }\n                return 1;\n            });\n        };\n        _this.handleLegendMouseOut = function (event) {\n            _this.parent\n                .selectAll('g.blobs path')\n                .transition(_this.services.transitions.getTransition('legend-mouseout-blob'))\n                .style('fill-opacity', Configuration.radar.opacity.selected)\n                .style('stroke-opacity', 1);\n        };\n        return _this;\n    }\n    Radar.prototype.init = function () {\n        var events = this.services.events;\n        // Highlight correct line legend item hovers\n        events.addEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n        // Un-highlight lines on legend item mouseouts\n        events.addEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n    };\n    Radar.prototype.render = function (animate) {\n        var _this = this;\n        if (animate === void 0) { animate = true; }\n        var svg = this.getContainerSVG();\n        var _a = DOMUtils.getSVGElementSize(this.parent, {\n            useAttrs: true,\n        }), width = _a.width, height = _a.height;\n        var data = this.model.getData();\n        var displayData = this.model.getDisplayData();\n        var groupedData = this.model.getGroupedData();\n        var options = this.getOptions();\n        var _b = Tools.getProperty(options, 'radar', 'axes'), angle = _b.angle, value = _b.value;\n        var groupMapsTo = Tools.getProperty(options, 'data', 'groupMapsTo');\n        var _c = Configuration.radar, xLabelPadding = _c.xLabelPadding, yLabelPadding = _c.yLabelPadding, yTicksNumber = _c.yTicksNumber, minRange = _c.minRange, xAxisRectHeight = _c.xAxisRectHeight;\n        this.uniqueKeys = Array.from(new Set(data.map(function (d) { return d[angle]; })));\n        this.uniqueGroups = Array.from(new Set(data.map(function (d) { return d[groupMapsTo]; })));\n        this.displayDataNormalized = this.normalizeFlatData(displayData);\n        this.groupedDataNormalized = this.normalizeGroupedData(groupedData);\n        var labelHeight = this.getLabelDimensions(this.uniqueKeys[0]).height;\n        var margin = 2 * (labelHeight + yLabelPadding);\n        var size = Math.min(width, height);\n        var diameter = size - margin;\n        var radius = diameter / 2;\n        if (radius <= 0) {\n            return;\n        }\n        // given a key, return the corresponding angle in radiants\n        // rotated by -PI/2 because we want angle 0° at -y (12 o’clock)\n        var xScale = scaleBand()\n            .domain(this.displayDataNormalized.map(function (d) { return d[angle]; }))\n            .range([0, 2 * Math.PI].map(function (a) { return a - Math.PI / 2; }));\n        var yScale = scaleLinear()\n            .domain([\n            0,\n            max(this.displayDataNormalized.map(function (d) { return d[value]; })),\n        ])\n            .range([minRange, radius])\n            .nice(yTicksNumber);\n        var yTicks = yScale.ticks(yTicksNumber);\n        var colorScale = function (group) {\n            return _this.model.getFillColor(group);\n        };\n        // constructs a new radial line generator\n        // the angle accessor returns the angle in radians with 0° at -y (12 o’clock)\n        // so map back the angle\n        var radialLineGenerator = lineRadial()\n            .angle(function (d) { return xScale(d[angle]) + Math.PI / 2; })\n            .radius(function (d) { return yScale(d[value]); })\n            .curve(curveLinearClosed);\n        // this line generator is necessary in order to make a transition of a value from the\n        // position it occupies using the old scale to the position it occupies using the new scale\n        var oldRadialLineGenerator = lineRadial()\n            .angle(radialLineGenerator.angle())\n            .radius(function (d) { return (oldYScale ? oldYScale(d[value]) : minRange); })\n            .curve(radialLineGenerator.curve());\n        // compute the space that each x label needs\n        var horizSpaceNeededByEachXLabel = this.uniqueKeys.map(function (key) {\n            var tickWidth = _this.getLabelDimensions(key).width;\n            // compute the distance between the point that the label rapresents and the vertical diameter\n            var distanceFromDiameter = distanceBetweenPointOnCircAndVerticalDiameter(xScale(key), radius);\n            // the space each label occupies is the sum of these two values\n            return tickWidth + distanceFromDiameter;\n        });\n        var leftPadding = max(horizSpaceNeededByEachXLabel);\n        // center coordinates\n        var c = {\n            x: leftPadding + xLabelPadding,\n            y: height / 2,\n        };\n        /////////////////////////////\n        // Drawing the radar\n        /////////////////////////////\n        // y axes\n        var yAxes = DOMUtils.appendOrSelect(svg, 'g.y-axes').attr('role', Roles.GROUP);\n        var yAxisUpdate = yAxes\n            .selectAll('path')\n            .data(yTicks, function (tick) { return tick; });\n        // for each tick, create array of data corresponding to the points composing the shape\n        var shapeData = function (tick) {\n            return _this.uniqueKeys.map(function (key) {\n                var _a;\n                return (_a = {}, _a[angle] = key, _a[value] = tick, _a);\n            });\n        };\n        yAxisUpdate.join(function (enter) {\n            return enter\n                .append('path')\n                .attr('role', Roles.GRAPHICS_SYMBOL)\n                .attr('opacity', 0)\n                .attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\")\n                .attr('fill', 'none')\n                .attr('d', function (tick) {\n                return oldRadialLineGenerator(shapeData(tick));\n            })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_y_axes_enter', animate))\n                    .attr('opacity', 1)\n                    .attr('d', function (tick) {\n                    return radialLineGenerator(shapeData(tick));\n                });\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_y_axes_update', animate))\n                    .attr('opacity', 1)\n                    .attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\")\n                    .attr('d', function (tick) {\n                    return radialLineGenerator(shapeData(tick));\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_y_axes_exit', animate))\n                    .attr('d', function (tick) {\n                    return radialLineGenerator(shapeData(tick));\n                })\n                    .attr('opacity', 0)\n                    .remove();\n            });\n        });\n        // x axes\n        var xAxes = DOMUtils.appendOrSelect(svg, 'g.x-axes').attr('role', Roles.GROUP);\n        var xAxisUpdate = xAxes\n            .selectAll('line')\n            .data(this.uniqueKeys, function (key) { return key; });\n        xAxisUpdate.join(function (enter) {\n            return enter\n                .append('line')\n                .attr('role', Roles.GRAPHICS_SYMBOL)\n                .attr('opacity', 0)\n                .attr('class', function (key) { return \"x-axis-\" + Tools.kebabCase(key); }) // replace spaces with -\n                .attr('stroke-dasharray', '0')\n                .attr('x1', function (key) { return polarToCartesianCoords(xScale(key), 0, c).x; })\n                .attr('y1', function (key) { return polarToCartesianCoords(xScale(key), 0, c).y; })\n                .attr('x2', function (key) { return polarToCartesianCoords(xScale(key), 0, c).x; })\n                .attr('y2', function (key) { return polarToCartesianCoords(xScale(key), 0, c).y; })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_x_axes_enter', animate))\n                    .attr('opacity', 1)\n                    .attr('x1', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n                })\n                    .attr('y1', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n                })\n                    .attr('x2', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n                })\n                    .attr('y2', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n                });\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_x_axes_update', animate))\n                    .attr('opacity', 1)\n                    .attr('x1', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).x;\n                })\n                    .attr('y1', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[0], c).y;\n                })\n                    .attr('x2', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).x;\n                })\n                    .attr('y2', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1], c).y;\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_x_axes_exit', animate))\n                    .attr('opacity', 0)\n                    .remove();\n            });\n        });\n        // x labels\n        var xLabels = DOMUtils.appendOrSelect(svg, 'g.x-labels').attr('role', Roles.GROUP);\n        var xLabelUpdate = xLabels.selectAll('text').data(this.uniqueKeys);\n        xLabelUpdate.join(function (enter) {\n            return enter\n                .append('text')\n                .text(function (key) { return key; })\n                .attr('opacity', 0)\n                .attr('x', function (key) {\n                return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n            })\n                .attr('y', function (key) {\n                return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n            })\n                .style('text-anchor', function (key) { return radialLabelPlacement(xScale(key)).textAnchor; })\n                .style('dominant-baseline', function (key) {\n                return radialLabelPlacement(xScale(key)).dominantBaseline;\n            })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_x_labels_enter', animate))\n                    .attr('opacity', 1);\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_x_labels_update', animate))\n                    .attr('opacity', 1)\n                    .attr('x', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).x;\n                })\n                    .attr('y', function (key) {\n                    return polarToCartesianCoords(xScale(key), yScale.range()[1] + xLabelPadding, c).y;\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_x_labels_exit', animate))\n                    .attr('opacity', 0)\n                    .remove();\n            });\n        });\n        // blobs\n        var blobs = DOMUtils.appendOrSelect(svg, 'g.blobs').attr('role', Roles.GROUP);\n        var blobUpdate = blobs\n            .selectAll('path')\n            .data(this.groupedDataNormalized, function (group) { return group.name; });\n        blobUpdate.join(function (enter) {\n            return enter\n                .append('path')\n                .attr('class', function (group) {\n                return _this.model.getColorClassName({\n                    classNameTypes: [\n                        ColorClassNameTypes.FILL,\n                        ColorClassNameTypes.STROKE,\n                    ],\n                    dataGroupName: group.name,\n                    originalClassName: 'blob',\n                });\n            })\n                .attr('role', Roles.GRAPHICS_SYMBOL)\n                .attr('opacity', 0)\n                .attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\")\n                .style('fill', function (group) { return colorScale(group.name); })\n                .style('fill-opacity', Configuration.radar.opacity.selected)\n                .style('stroke', function (group) { return colorScale(group.name); })\n                .attr('d', function (group) { return oldRadialLineGenerator(group.data); })\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_blobs_enter', animate))\n                    .attr('opacity', 1)\n                    .attr('d', function (group) {\n                    return radialLineGenerator(group.data);\n                });\n            });\n        }, function (update) {\n            update\n                .attr('class', function (group) {\n                return _this.model.getColorClassName({\n                    classNameTypes: [\n                        ColorClassNameTypes.FILL,\n                        ColorClassNameTypes.STROKE,\n                    ],\n                    dataGroupName: group.name,\n                    originalClassName: 'blob',\n                });\n            })\n                .style('fill', function (group) { return colorScale(group.name); })\n                .style('stroke', function (group) { return colorScale(group.name); });\n            update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_blobs_update', animate))\n                    .attr('opacity', 1)\n                    .attr('transform', \"translate(\" + c.x + \", \" + c.y + \")\")\n                    .attr('d', function (group) { return radialLineGenerator(group.data); });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_blobs_exit', animate))\n                    .attr('d', function (group) { return radialLineGenerator(group.data); })\n                    .attr('opacity', 0)\n                    .remove();\n            });\n        });\n        // data dots\n        var dots = DOMUtils.appendOrSelect(svg, 'g.dots').attr('role', Roles.GROUP);\n        var dotsUpdate = dots\n            .selectAll('circle')\n            .data(this.displayDataNormalized);\n        dotsUpdate\n            .join(function (enter) {\n            return enter.append('circle').attr('role', Roles.GRAPHICS_SYMBOL);\n        }, function (update) { return update; }, function (exit) { return exit.remove(); })\n            .attr('class', function (d) {\n            return _this.model.getColorClassName({\n                classNameTypes: [ColorClassNameTypes.FILL],\n                dataGroupName: d[groupMapsTo],\n                originalClassName: Tools.kebabCase(d[angle]),\n            });\n        })\n            .attr('cx', function (d) {\n            return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).x;\n        })\n            .attr('cy', function (d) {\n            return polarToCartesianCoords(xScale(d[angle]), yScale(d[value]), c).y;\n        })\n            .attr('r', 0)\n            .attr('opacity', 0)\n            .style('fill', function (d) { return colorScale(d[groupMapsTo]); });\n        // rectangles\n        var xAxesRect = DOMUtils.appendOrSelect(svg, 'g.x-axes-rect').attr('role', Roles.GROUP);\n        var xAxisRectUpdate = xAxesRect\n            .selectAll('rect')\n            .data(this.uniqueKeys);\n        xAxisRectUpdate\n            .join(function (enter) {\n            return enter.append('rect').attr('role', Roles.GRAPHICS_SYMBOL);\n        }, function (update) { return update; }, function (exit) { return exit.remove(); })\n            .attr('x', c.x)\n            .attr('y', c.y - xAxisRectHeight / 2)\n            .attr('width', yScale.range()[1])\n            .attr('height', xAxisRectHeight)\n            .style('fill', 'red')\n            .style('fill-opacity', 0)\n            .attr('transform', function (key) { return \"rotate(\" + radToDeg(xScale(key)) + \", \" + c.x + \", \" + c.y + \")\"; });\n        // y labels (show only the min and the max labels)\n        var yLabels = DOMUtils.appendOrSelect(svg, 'g.y-labels').attr('role', Roles.GROUP);\n        var yLabelUpdate = yLabels.selectAll('text').data(extent(yTicks));\n        yLabelUpdate.join(function (enter) {\n            return enter\n                .append('text')\n                .attr('opacity', 0)\n                .text(function (tick) { return tick; })\n                .attr('x', function (tick) {\n                return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n            })\n                .attr('y', function (tick) {\n                return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n            })\n                .style('text-anchor', 'start')\n                .style('dominant-baseline', 'middle')\n                .call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_y_labels_enter', animate))\n                    .attr('opacity', 1);\n            });\n        }, function (update) {\n            return update.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_y_labels_update', animate))\n                    .text(function (tick) { return tick; })\n                    .attr('opacity', 1)\n                    .attr('x', function (tick) {\n                    return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).x + yLabelPadding;\n                })\n                    .attr('y', function (tick) {\n                    return polarToCartesianCoords(-Math.PI / 2, yScale(tick), c).y;\n                });\n            });\n        }, function (exit) {\n            return exit.call(function (selection) {\n                return selection\n                    .transition(_this.services.transitions.getTransition('radar_y_labels_exit', animate))\n                    .attr('opacity', 0)\n                    .remove();\n            });\n        });\n        var alignment = Tools.getProperty(options, 'radar', 'alignment');\n        var alignmentOffset = DOMUtils.getAlignmentOffset(alignment, svg, this.getParent());\n        svg.attr('transform', \"translate(\" + alignmentOffset + \", 0)\");\n        // Add event listeners\n        this.addEventListeners();\n        oldYScale = yScale; // save the current scale as the old one\n    };\n    Radar.prototype.destroy = function () {\n        // Remove event listeners\n        this.parent\n            .selectAll('.x-axes-rect > rect')\n            .on('mouseover', null)\n            .on('mousemove', null)\n            .on('mouseout', null);\n        // Remove legend listeners\n        var eventsFragment = this.services.events;\n        eventsFragment.removeEventListener(Events.Legend.ITEM_HOVER, this.handleLegendOnHover);\n        eventsFragment.removeEventListener(Events.Legend.ITEM_MOUSEOUT, this.handleLegendMouseOut);\n    };\n    Radar.prototype.addEventListeners = function () {\n        var self = this;\n        var angle = Tools.getProperty(this.getOptions(), 'radar').axes.angle;\n        // events on x axes rects\n        this.parent\n            .selectAll('.x-axes-rect > rect')\n            .on('mouseover', function (datum) {\n            var hoveredElement = select(this);\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOVER, {\n                element: hoveredElement,\n                datum: datum,\n            });\n            var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n            var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum));\n            // Change style\n            axisLine\n                .classed('hovered', true)\n                .attr('stroke-dasharray', '4 4');\n            dots.classed('hovered', true)\n                .attr('opacity', 1)\n                .attr('r', Configuration.radar.dotsRadius);\n            // get the items that should be highlighted\n            var itemsToHighlight = self.displayDataNormalized.filter(function (d) { return d[angle] === datum; });\n            var options = self.getOptions();\n            var groupMapsTo = options.data.groupMapsTo;\n            var valueMapsTo = Tools.getProperty(options, 'radar', 'axes', 'value');\n            // Show tooltip\n            self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n                hoveredElement: hoveredElement,\n                items: itemsToHighlight\n                    .filter(function (datum) { return typeof datum[valueMapsTo] === 'number'; })\n                    .map(function (datum) { return ({\n                    label: datum[groupMapsTo],\n                    value: datum[valueMapsTo],\n                    color: self.model.getFillColor(datum[groupMapsTo]),\n                    class: self.model.getColorClassName({\n                        classNameTypes: [ColorClassNameTypes.TOOLTIP],\n                        dataGroupName: datum[groupMapsTo],\n                    }),\n                }); }),\n            });\n        })\n            .on('mousemove', function (datum) {\n            var hoveredElement = select(this);\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEMOVE, {\n                element: hoveredElement,\n                datum: datum,\n            });\n            self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n        })\n            .on('click', function (datum) {\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_CLICK, {\n                element: select(this),\n                datum: datum,\n            });\n        })\n            .on('mouseout', function (datum) {\n            var hoveredElement = select(this);\n            var axisLine = self.parent.select(\".x-axes .x-axis-\" + Tools.kebabCase(datum));\n            var dots = self.parent.selectAll(\".dots circle.\" + Tools.kebabCase(datum));\n            // Change style\n            axisLine\n                .classed('hovered', false)\n                .attr('stroke-dasharray', '0');\n            dots.classed('hovered', false).attr('opacity', 0).attr('r', 0);\n            // Dispatch mouse event\n            self.services.events.dispatchEvent(Events.Radar.X_AXIS_MOUSEOUT, {\n                element: hoveredElement,\n                datum: datum,\n            });\n            // Hide tooltip\n            self.services.events.dispatchEvent(Events.Tooltip.HIDE);\n        });\n    };\n    return Radar;\n}(Component));\nexport { Radar };\n//# sourceMappingURL=../../../src/components/graphs/radar.js.map"]},"metadata":{},"sourceType":"module"}