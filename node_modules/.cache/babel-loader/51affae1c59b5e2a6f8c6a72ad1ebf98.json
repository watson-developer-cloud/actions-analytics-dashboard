{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}(); // Internal Imports\n\n\nimport { Component } from '../component';\nimport { Tools } from '../../tools';\nimport { ColorClassNameTypes, LegendItemType } from '../../interfaces/enums';\nimport { LegendOrientations, Roles, Events, TruncationTypes } from '../../interfaces';\nimport { DOMUtils } from '../../services';\nimport * as Configuration from '../../configuration'; // D3 Imports\n\nimport { select, event } from 'd3-selection';\n\nvar Legend =\n/** @class */\nfunction (_super) {\n  __extends(Legend, _super);\n\n  function Legend() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = 'legend';\n    return _this;\n  }\n\n  Legend.prototype.render = function () {\n    var _this = this;\n\n    var svg = this.getContainerSVG().attr('role', Roles.GROUP).attr('data-name', 'legend-items');\n    var options = this.getOptions();\n    var legendOptions = Tools.getProperty(options, 'legend');\n    var dataGroups = this.model.getDataGroups();\n    var legendOrder = Tools.getProperty(legendOptions, 'order');\n\n    if (legendOrder) {\n      dataGroups = this.sortDataGroups(dataGroups, legendOrder);\n    }\n\n    var legendItems = svg.selectAll('g.legend-item').data(dataGroups, function (dataGroup) {\n      return dataGroup.name;\n    });\n    var addedLegendItems = legendItems.enter().append('g').classed('legend-item', true).classed('active', function (d, i) {\n      return d.status === Configuration.legend.items.status.ACTIVE;\n    });\n    var legendClickable = Tools.getProperty(this.getOptions(), 'legend', 'clickable');\n    svg.classed('clickable', legendClickable);\n    var checkboxRadius = Configuration.legend.checkbox.radius;\n    addedLegendItems.append('rect').classed('checkbox', true).merge(legendItems.select('rect.checkbox')).attr('role', Roles.CHECKBOX).attr('tabindex', legendClickable ? 0 : -1).attr('aria-label', function (d) {\n      return d.name;\n    }).attr('aria-checked', function (_a) {\n      var status = _a.status;\n      return status === Configuration.legend.items.status.ACTIVE;\n    }).attr('width', checkboxRadius * 2).attr('height', checkboxRadius * 2).attr('rx', 1).attr('ry', 1).attr('class', function (d, i) {\n      return _this.model.getColorClassName({\n        classNameTypes: [ColorClassNameTypes.FILL],\n        dataGroupName: d.name,\n        originalClassName: 'checkbox'\n      });\n    }).style('fill', function (d) {\n      return d.status === Configuration.legend.items.status.ACTIVE ? _this.model.getFillColor(d.name) || _this.model.getStrokeColor(d.name) : null;\n    }).classed('active', function (d, i) {\n      return d.status === Configuration.legend.items.status.ACTIVE;\n    });\n    var addedLegendItemsText = addedLegendItems.append('text').merge(legendItems.select('text'));\n    this.truncateLegendText(addedLegendItemsText); // Keep track of line numbers and positions\n\n    var itemConfig = {\n      startingPoint: 0,\n      itemIndexInLine: 0,\n      lineNumber: 0,\n      lastLegendItemTextWidth: 0\n    };\n    this.breakItemsIntoLines(addedLegendItems, 'legend-item', itemConfig);\n    var additionalItemsOption = Tools.getProperty(options, 'legend', 'additionalItems'); // add additional legend items\n\n    if (additionalItemsOption && dataGroups.length) {\n      var self_1 = this;\n      var additionalItems = svg.selectAll('g.additional-item').data(additionalItemsOption);\n      additionalItems.exit().remove();\n      var addedAdditionalItems = additionalItems.enter().append('g').merge(additionalItems).classed('additional-item', true); // remove nested child elements that no longer needed\n\n      addedAdditionalItems.selectAll('*').remove(); // get index of item with same type to assign distinct classname\n\n      var previousType_1;\n      var indexOfItem_1 = 1; // add different type of legend items\n\n      addedAdditionalItems.append('g').classed('icon', true).each(function (d, i) {\n        var additionalItem = select(this);\n\n        if (!previousType_1 || previousType_1 != d.type) {\n          previousType_1 = d.type;\n          indexOfItem_1 = 1;\n        } else {\n          indexOfItem_1++;\n        }\n\n        self_1.addAdditionalItem(additionalItem, d, indexOfItem_1);\n      });\n      var addedAdditionalItemsText = addedAdditionalItems.append('text').merge(addedAdditionalItems.select('text'));\n      self_1.truncateLegendText(addedAdditionalItemsText);\n      this.breakItemsIntoLines(addedAdditionalItems, 'additional-item', itemConfig);\n    } // Remove old elements as needed.\n\n\n    legendItems.exit().on('mouseover', null).on('click', null).on('mouseout', null).remove();\n\n    if (legendClickable && addedLegendItems.size() > 0) {\n      this.addEventListeners();\n    }\n\n    var alignment = Tools.getProperty(legendOptions, 'alignment');\n    var alignmentOffset = DOMUtils.getAlignmentOffset(alignment, svg, this.getParent());\n    svg.attr('transform', \"translate(\" + alignmentOffset + \", 0)\");\n  };\n\n  Legend.prototype.sortDataGroups = function (dataGroups, legendOrder) {\n    // Sort data in user defined order\n    dataGroups.sort(function (dataA, dataB) {\n      return legendOrder.indexOf(dataA.name) - legendOrder.indexOf(dataB.name);\n    }); // If user only defined partial ordering, ordered items are placed before unordered ones\n\n    if (legendOrder.length < dataGroups.length) {\n      var definedOrderIndex = dataGroups.length - legendOrder.length;\n      var definedOrder = dataGroups.slice(definedOrderIndex);\n      return definedOrder.concat(dataGroups.slice(0, definedOrderIndex));\n    }\n\n    return dataGroups;\n  };\n\n  Legend.prototype.addAdditionalItem = function (additionalItem, itemConfig, indexOfItem) {\n    var _a = Configuration.legend.area,\n        width = _a.width,\n        height = _a.height;\n\n    if (itemConfig.type === LegendItemType.RADIUS) {\n      var _b = Configuration.legend.radius,\n          iconData = _b.iconData,\n          fill = _b.fill,\n          stroke = _b.stroke;\n      var circleEnter = additionalItem.attr('fill', 'none').selectAll('circle').data(iconData).enter();\n      circleEnter.append('circle').classed('radius', true).attr('role', Roles.IMG).attr('aria-label', 'radius').attr('cx', function (d) {\n        return d.cx;\n      }).attr('cy', function (d) {\n        return d.cy;\n      }).attr('r', function (d) {\n        return d.r;\n      }).style('fill', itemConfig.fill ? itemConfig.fill : fill).style('stroke', itemConfig.stroke ? itemConfig.stroke : stroke);\n    } else if (itemConfig.type === LegendItemType.LINE) {\n      var lineConfig = Configuration.legend.line;\n\n      if (additionalItem.select('line.line').empty()) {\n        additionalItem.append('line').classed(\"line-\" + indexOfItem, true).attr('role', Roles.IMG).attr('aria-label', 'line').attr('x1', 0).attr('y1', lineConfig.yPosition).attr('x2', width).attr('y2', lineConfig.yPosition).style('stroke', itemConfig.stroke ? itemConfig.stroke : lineConfig.stroke).style('stroke-width', lineConfig.strokeWidth);\n      }\n    } else if (itemConfig.type === LegendItemType.AREA) {\n      if (additionalItem.select('rect.area').empty()) {\n        additionalItem.append('rect').classed(\"area-\" + indexOfItem, true).attr('role', Roles.IMG).attr('aria-label', 'area').attr('width', width).attr('height', height).style('fill', indexOfItem > 3 && !itemConfig.fill ? Configuration.legend.area.fill : itemConfig.fill).style('stroke', itemConfig.stroke);\n      }\n    } else if (itemConfig.type === LegendItemType.SIZE) {\n      var _c = Configuration.legend.size,\n          iconData = _c.iconData,\n          fill = _c.fill,\n          stroke = _c.stroke;\n      var sizeEnter = additionalItem.attr('fill', 'none').attr('role', Roles.IMG).attr('aria-label', 'size').selectAll('rect').data(iconData).enter();\n      sizeEnter.append('rect').classed('size', true).attr('width', function (d) {\n        return d.width;\n      }).attr('height', function (d) {\n        return d.height;\n      }).attr('y', function (d) {\n        return 24 - d.height;\n      }).style('fill', itemConfig.fill ? itemConfig.fill : fill).style('stroke', itemConfig.stroke ? itemConfig.stroke : stroke).style('stroke-width', 1);\n    } else if (itemConfig.type === LegendItemType.QUARTILE) {\n      var iconData = Configuration.legend.quartile.iconData;\n      var quartileEnter = additionalItem.selectAll('rect').attr('role', Roles.IMG).attr('aria-label', 'quartile').data(iconData).enter();\n      quartileEnter.append('rect').attr('class', function (d, i) {\n        return \"quartile-\" + (i === 0 ? 'wrapper' : 'line');\n      }).attr('x', function (d) {\n        return d.x;\n      }).attr('y', function (d) {\n        return d.y;\n      }).attr('width', function (d) {\n        return d.width;\n      }).attr('height', function (d) {\n        return d.height;\n      });\n    } else if (itemConfig.type === LegendItemType.ZOOM) {\n      var _d = Tools.getProperty(Configuration, 'legend', 'zoom'),\n          iconData = _d.iconData,\n          color_1 = _d.color;\n\n      var zoomEnter = additionalItem.attr('role', Roles.IMG).attr('aria-label', 'zoom').selectAll('g.icon').data(iconData).enter(); // add '+' for the magnifying icon\n\n      zoomEnter.append('g').attr('x', function (d) {\n        return d.x;\n      }).attr('y', function (d) {\n        return d.y;\n      }).attr('width', function (d) {\n        return d.width;\n      }).attr('height', function (d) {\n        return d.height;\n      }).append('polygon').attr('points', '7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82').attr('fill', function (d) {\n        return itemConfig.color ? itemConfig.color : color_1;\n      }); // add the magnifying zoom icon handle/circle\n\n      zoomEnter.append('path').attr('d', 'M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z').attr('fill', function (d) {\n        return itemConfig.color ? itemConfig.color : color_1;\n      });\n    }\n  };\n\n  Legend.prototype.truncateLegendText = function (addedLegendItemsText) {\n    var trucationOptions = Tools.getProperty(this.getOptions(), 'legend', 'truncation'); // Truncation\n    // get user provided custom values for truncation\n\n    var truncationType = Tools.getProperty(trucationOptions, 'type');\n    var truncationThreshold = Tools.getProperty(trucationOptions, 'threshold');\n    var truncationNumCharacter = Tools.getProperty(trucationOptions, 'numCharacter'); // truncate the legend label if it's too long\n\n    if (truncationType !== TruncationTypes.NONE) {\n      addedLegendItemsText.html(function (d) {\n        if (d.name.length > truncationThreshold) {\n          return Tools.truncateLabel(d.name, truncationType, truncationNumCharacter);\n        } else {\n          return d.name;\n        }\n      });\n    } else {\n      addedLegendItemsText.html(function (d) {\n        return d.name;\n      });\n    }\n  };\n\n  Legend.prototype.breakItemsIntoLines = function (addedLegendItems, className, itemConfig) {\n    var self = this;\n    var svg = this.getContainerSVG(); // Check if there are disabled legend items\n\n    var DISABLED = Configuration.legend.items.status.DISABLED;\n    var dataGroups = this.model.getDataGroups();\n    var hasDeactivatedItems = dataGroups.some(function (dataGroup) {\n      return dataGroup.status === DISABLED;\n    });\n    addedLegendItems.merge(svg.selectAll(\"g.\" + className)).each(function (d) {\n      var legendItem = select(this);\n      var svgDimensions = DOMUtils.getSVGElementSize(self.parent, {\n        useAttr: true\n      }); // Set item position based on item type\n\n      if (!d.type) {\n        itemConfig.hasDeactivatedItems = hasDeactivatedItems;\n        self.setLegendItemPosition(legendItem, svgDimensions, itemConfig, LegendItemType.CHECKBOX);\n      } else {\n        self.setLegendItemPosition(legendItem, svgDimensions, itemConfig, d.type);\n      }\n    });\n  };\n\n  Legend.prototype.setLegendItemPosition = function (legendItem, parentSVGDimension, itemConfig, itemType) {\n    var legendOrientation = Tools.getProperty(this.getOptions(), 'legend', 'orientation'); // Configs\n\n    var legendItemsHorizontalSpacing = Configuration.legend.items.horizontalSpace;\n    var legendItemsVerticalSpacing = Configuration.legend.items.verticalSpace;\n    var legendTextYOffset = Configuration.legend.items.textYOffset;\n    var iconWidth = itemType === LegendItemType.CHECKBOX || itemType === LegendItemType.RADIUS || itemType === LegendItemType.ZOOM ? Configuration.legend.checkbox.radius * 2 : Configuration.legend.area.width;\n    var spaceAfter = Configuration.legend.items.spaceAfter;\n    var legendItemTextDimensions = DOMUtils.getSVGElementSize(legendItem.select('text'), {\n      useBBox: true\n    });\n    var translateOffset = Configuration.legend.area.width / 2 - 1; // Check and update position\n\n    if (itemConfig.itemIndexInLine === 0 || itemConfig.lastLegendItemTextWidth === 0 || legendOrientation === LegendOrientations.VERTICAL) {\n      if (itemConfig.itemIndexInLine > 0) {\n        itemConfig.lineNumber++;\n      }\n    } else {\n      itemConfig.startingPoint += itemConfig.lastLegendItemTextWidth + iconWidth + spaceAfter + legendItemsHorizontalSpacing; // Place legends in a new line if space is not enough\n\n      if (itemConfig.startingPoint + iconWidth + spaceAfter + legendItemTextDimensions.width > parentSVGDimension.width) {\n        itemConfig.lineNumber++;\n        itemConfig.startingPoint = iconWidth === 24 ? translateOffset : 0;\n        itemConfig.itemIndexInLine = 0;\n      }\n    }\n\n    itemConfig.lastLegendItemTextWidth = legendItemTextDimensions.width;\n    var yPosition = itemConfig.lineNumber * legendItemsVerticalSpacing;\n    var yTextPosition = legendTextYOffset + yPosition + 3;\n\n    if (itemType === LegendItemType.CHECKBOX) {\n      legendItem.select('rect.checkbox').attr('x', itemConfig.startingPoint).attr('y', yPosition); // Position text\n\n      legendItem.select('text').attr('x', itemConfig.startingPoint + iconWidth + spaceAfter).attr('y', yTextPosition); // Test if legendItems are placed in the correct direction\n\n      var testHorizontal = (!legendOrientation || legendOrientation === LegendOrientations.HORIZONTAL) && parseInt(legendItem.select('rect.checkbox').attr('y')) % 24 === 0;\n      var testVertical = legendOrientation === LegendOrientations.VERTICAL && legendItem.select('rect.checkbox').attr('x') === '0';\n      var hasCorrectLegendDirection = testHorizontal || testVertical; // Render checkbox check icon\n\n      if (itemConfig.hasDeactivatedItems && legendItem.select('g.check').empty() && hasCorrectLegendDirection) {\n        legendItem.append('g').classed('check', true).html(\"\\n\\t\\t\\t\\t\\t\\t<svg focusable=\\\"false\\\" preserveAspectRatio=\\\"xMidYMid meet\\\"\\n\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"32\\\" height=\\\"32\\\"\\n\\t\\t\\t\\t\\t\\t\\tviewBox=\\\"0 0 32 32\\\" aria-hidden=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\\"will-change: transform;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z\\\"></path>\\n\\t\\t\\t\\t\\t\\t\\t<title>Checkmark</title>\\n\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\");\n        legendItem.select('g.check svg').attr('width', iconWidth - 1).attr('height', iconWidth - 1).attr('x', parseFloat(legendItem.select('rect.checkbox').attr('x')) + 0.5).attr('y', parseFloat(legendItem.select('rect.checkbox').attr('y')) + 0.5);\n      } else if (!itemConfig.hasDeactivatedItems && !legendItem.select('g.check').empty()) {\n        legendItem.select('g.check').remove();\n      }\n    } else if (itemType === LegendItemType.RADIUS) {\n      legendItem.selectAll('circle.radius').attr('cx', function (d) {\n        return itemConfig.startingPoint + d.cx;\n      }).attr('cy', function (d) {\n        return yPosition + d.cy;\n      });\n      legendItem.select('text').attr('x', itemConfig.startingPoint + iconWidth + spaceAfter).attr('y', yTextPosition);\n    } else if (itemType === LegendItemType.SIZE) {\n      legendItem.selectAll('g.icon').attr('transform', \"translate(\" + (itemConfig.startingPoint - translateOffset) + \", \" + (yPosition - 12) + \")\");\n      legendItem.select('text').attr('x', itemConfig.startingPoint + iconWidth + spaceAfter - translateOffset).attr('y', yTextPosition);\n    } else if (itemType === LegendItemType.ZOOM) {\n      legendItem.selectAll('g.icon').attr('transform', \"translate(\" + itemConfig.startingPoint + \", \" + yPosition + \")\");\n      legendItem.select('text').attr('x', itemConfig.startingPoint + iconWidth + spaceAfter).attr('y', yTextPosition);\n    } else {\n      legendItem.selectAll('g.icon').attr('transform', \"translate(\" + (itemConfig.startingPoint - translateOffset) + \", \" + yPosition + \")\");\n      legendItem.select('text').attr('x', itemConfig.startingPoint + iconWidth + spaceAfter - translateOffset).attr('y', yTextPosition);\n    }\n\n    itemConfig.itemIndexInLine++;\n  };\n\n  Legend.prototype.addEventListeners = function () {\n    var self = this;\n    var svg = this.getContainerSVG();\n    var options = this.getOptions();\n    var legendOptions = Tools.getProperty(options, 'legend');\n    var truncationThreshold = Tools.getProperty(legendOptions, 'truncation', 'threshold');\n    svg.selectAll('g.legend-item').on('mouseover', function () {\n      self.services.events.dispatchEvent(Events.Legend.ITEM_HOVER, {\n        hoveredElement: select(this)\n      }); // Configs\n\n      var checkboxRadius = Configuration.legend.checkbox.radius;\n      var hoveredItem = select(this);\n      hoveredItem.select('rect.checkbox').classed('hovered', true);\n      hoveredItem.append('rect').classed('hover-stroke', true).attr('x', parseFloat(hoveredItem.select('rect.checkbox').attr('x')) - 2).attr('y', parseFloat(hoveredItem.select('rect.checkbox').attr('y')) - 2).attr('width', checkboxRadius * 2 + 4).attr('height', checkboxRadius * 2 + 4).attr('rx', 3).attr('ry', 3).lower();\n      var hoveredItemData = hoveredItem.datum();\n\n      if (hoveredItemData.name.length > truncationThreshold) {\n        self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n          hoveredElement: hoveredItem,\n          content: hoveredItemData.name\n        });\n      }\n    }).on('mousemove', function () {\n      self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n    }).on('click', function () {\n      self.services.events.dispatchEvent(Events.Legend.ITEM_CLICK, {\n        clickedElement: select(this)\n      });\n      var clickedItem = select(this);\n      var clickedItemData = clickedItem.datum();\n      self.model.toggleDataLabel(clickedItemData.name);\n    }).on('mouseout', function () {\n      var hoveredItem = select(this);\n      hoveredItem.select('rect.hover-stroke').remove();\n      hoveredItem.select('rect.checkbox').classed('hovered', false);\n      self.services.events.dispatchEvent(Events.Tooltip.HIDE);\n      self.services.events.dispatchEvent(Events.Legend.ITEM_MOUSEOUT, {\n        hoveredElement: hoveredItem\n      });\n    });\n    svg.selectAll('g.legend-item rect.checkbox').on('keyup', function (d) {\n      if (event.key && (event.key === 'Enter' || event.key === ' ')) {\n        event.preventDefault();\n        self.model.toggleDataLabel(d.name);\n      }\n    });\n    svg.selectAll('g.additional-item').on('mouseover', function () {\n      var hoveredItem = select(this);\n      var hoveredItemData = hoveredItem.datum();\n\n      if (hoveredItemData.name.length > truncationThreshold) {\n        self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n          hoveredElement: hoveredItem,\n          content: hoveredItemData.name\n        });\n      }\n    });\n  };\n\n  return Legend;\n}(Component);\n\nexport { Legend };","map":{"version":3,"sources":["/Users/zander/Documents/Development/ActionsLogging/Dashboard/node_modules/@carbon/charts/components/essentials/legend.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","Component","Tools","ColorClassNameTypes","LegendItemType","LegendOrientations","Roles","Events","TruncationTypes","DOMUtils","Configuration","select","event","Legend","_super","_this","apply","arguments","type","render","svg","getContainerSVG","attr","GROUP","options","getOptions","legendOptions","getProperty","dataGroups","model","getDataGroups","legendOrder","sortDataGroups","legendItems","selectAll","data","dataGroup","name","addedLegendItems","enter","append","classed","i","status","legend","items","ACTIVE","legendClickable","checkboxRadius","checkbox","radius","merge","CHECKBOX","_a","getColorClassName","classNameTypes","FILL","dataGroupName","originalClassName","style","getFillColor","getStrokeColor","addedLegendItemsText","truncateLegendText","itemConfig","startingPoint","itemIndexInLine","lineNumber","lastLegendItemTextWidth","breakItemsIntoLines","additionalItemsOption","length","self_1","additionalItems","exit","remove","addedAdditionalItems","previousType_1","indexOfItem_1","each","additionalItem","addAdditionalItem","addedAdditionalItemsText","on","size","addEventListeners","alignment","alignmentOffset","getAlignmentOffset","getParent","sort","dataA","dataB","indexOf","definedOrderIndex","definedOrder","slice","concat","indexOfItem","area","width","height","RADIUS","_b","iconData","fill","stroke","circleEnter","IMG","cx","cy","r","LINE","lineConfig","line","empty","yPosition","strokeWidth","AREA","SIZE","_c","sizeEnter","QUARTILE","quartile","quartileEnter","x","y","ZOOM","_d","color_1","color","zoomEnter","trucationOptions","truncationType","truncationThreshold","truncationNumCharacter","NONE","html","truncateLabel","className","self","DISABLED","hasDeactivatedItems","some","legendItem","svgDimensions","getSVGElementSize","parent","useAttr","setLegendItemPosition","parentSVGDimension","itemType","legendOrientation","legendItemsHorizontalSpacing","horizontalSpace","legendItemsVerticalSpacing","verticalSpace","legendTextYOffset","textYOffset","iconWidth","spaceAfter","legendItemTextDimensions","useBBox","translateOffset","VERTICAL","yTextPosition","testHorizontal","HORIZONTAL","parseInt","testVertical","hasCorrectLegendDirection","parseFloat","services","events","dispatchEvent","ITEM_HOVER","hoveredElement","hoveredItem","lower","hoveredItemData","datum","Tooltip","SHOW","content","MOVE","ITEM_CLICK","clickedElement","clickedItem","clickedItemData","toggleDataLabel","HIDE","ITEM_MOUSEOUT","key","preventDefault"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n// Internal Imports\nimport { Component } from '../component';\nimport { Tools } from '../../tools';\nimport { ColorClassNameTypes, LegendItemType } from '../../interfaces/enums';\nimport { LegendOrientations, Roles, Events, TruncationTypes, } from '../../interfaces';\nimport { DOMUtils } from '../../services';\nimport * as Configuration from '../../configuration';\n// D3 Imports\nimport { select, event } from 'd3-selection';\nvar Legend = /** @class */ (function (_super) {\n    __extends(Legend, _super);\n    function Legend() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.type = 'legend';\n        return _this;\n    }\n    Legend.prototype.render = function () {\n        var _this = this;\n        var svg = this.getContainerSVG()\n            .attr('role', Roles.GROUP)\n            .attr('data-name', 'legend-items');\n        var options = this.getOptions();\n        var legendOptions = Tools.getProperty(options, 'legend');\n        var dataGroups = this.model.getDataGroups();\n        var legendOrder = Tools.getProperty(legendOptions, 'order');\n        if (legendOrder) {\n            dataGroups = this.sortDataGroups(dataGroups, legendOrder);\n        }\n        var legendItems = svg\n            .selectAll('g.legend-item')\n            .data(dataGroups, function (dataGroup) { return dataGroup.name; });\n        var addedLegendItems = legendItems\n            .enter()\n            .append('g')\n            .classed('legend-item', true)\n            .classed('active', function (d, i) {\n            return d.status === Configuration.legend.items.status.ACTIVE;\n        });\n        var legendClickable = Tools.getProperty(this.getOptions(), 'legend', 'clickable');\n        svg.classed('clickable', legendClickable);\n        var checkboxRadius = Configuration.legend.checkbox.radius;\n        addedLegendItems\n            .append('rect')\n            .classed('checkbox', true)\n            .merge(legendItems.select('rect.checkbox'))\n            .attr('role', Roles.CHECKBOX)\n            .attr('tabindex', legendClickable ? 0 : -1)\n            .attr('aria-label', function (d) { return d.name; })\n            .attr('aria-checked', function (_a) {\n            var status = _a.status;\n            return status === Configuration.legend.items.status.ACTIVE;\n        })\n            .attr('width', checkboxRadius * 2)\n            .attr('height', checkboxRadius * 2)\n            .attr('rx', 1)\n            .attr('ry', 1)\n            .attr('class', function (d, i) {\n            return _this.model.getColorClassName({\n                classNameTypes: [ColorClassNameTypes.FILL],\n                dataGroupName: d.name,\n                originalClassName: 'checkbox',\n            });\n        })\n            .style('fill', function (d) {\n            return d.status === Configuration.legend.items.status.ACTIVE\n                ? _this.model.getFillColor(d.name) ||\n                    _this.model.getStrokeColor(d.name)\n                : null;\n        })\n            .classed('active', function (d, i) {\n            return d.status === Configuration.legend.items.status.ACTIVE;\n        });\n        var addedLegendItemsText = addedLegendItems\n            .append('text')\n            .merge(legendItems.select('text'));\n        this.truncateLegendText(addedLegendItemsText);\n        // Keep track of line numbers and positions\n        var itemConfig = {\n            startingPoint: 0,\n            itemIndexInLine: 0,\n            lineNumber: 0,\n            lastLegendItemTextWidth: 0,\n        };\n        this.breakItemsIntoLines(addedLegendItems, 'legend-item', itemConfig);\n        var additionalItemsOption = Tools.getProperty(options, 'legend', 'additionalItems');\n        // add additional legend items\n        if (additionalItemsOption && dataGroups.length) {\n            var self_1 = this;\n            var additionalItems = svg\n                .selectAll('g.additional-item')\n                .data(additionalItemsOption);\n            additionalItems.exit().remove();\n            var addedAdditionalItems = additionalItems\n                .enter()\n                .append('g')\n                .merge(additionalItems)\n                .classed('additional-item', true);\n            // remove nested child elements that no longer needed\n            addedAdditionalItems.selectAll('*').remove();\n            // get index of item with same type to assign distinct classname\n            var previousType_1;\n            var indexOfItem_1 = 1;\n            // add different type of legend items\n            addedAdditionalItems\n                .append('g')\n                .classed('icon', true)\n                .each(function (d, i) {\n                var additionalItem = select(this);\n                if (!previousType_1 || previousType_1 != d.type) {\n                    previousType_1 = d.type;\n                    indexOfItem_1 = 1;\n                }\n                else {\n                    indexOfItem_1++;\n                }\n                self_1.addAdditionalItem(additionalItem, d, indexOfItem_1);\n            });\n            var addedAdditionalItemsText = addedAdditionalItems\n                .append('text')\n                .merge(addedAdditionalItems.select('text'));\n            self_1.truncateLegendText(addedAdditionalItemsText);\n            this.breakItemsIntoLines(addedAdditionalItems, 'additional-item', itemConfig);\n        }\n        // Remove old elements as needed.\n        legendItems\n            .exit()\n            .on('mouseover', null)\n            .on('click', null)\n            .on('mouseout', null)\n            .remove();\n        if (legendClickable && addedLegendItems.size() > 0) {\n            this.addEventListeners();\n        }\n        var alignment = Tools.getProperty(legendOptions, 'alignment');\n        var alignmentOffset = DOMUtils.getAlignmentOffset(alignment, svg, this.getParent());\n        svg.attr('transform', \"translate(\" + alignmentOffset + \", 0)\");\n    };\n    Legend.prototype.sortDataGroups = function (dataGroups, legendOrder) {\n        // Sort data in user defined order\n        dataGroups.sort(function (dataA, dataB) {\n            return legendOrder.indexOf(dataA.name) -\n                legendOrder.indexOf(dataB.name);\n        });\n        // If user only defined partial ordering, ordered items are placed before unordered ones\n        if (legendOrder.length < dataGroups.length) {\n            var definedOrderIndex = dataGroups.length - legendOrder.length;\n            var definedOrder = dataGroups.slice(definedOrderIndex);\n            return definedOrder.concat(dataGroups.slice(0, definedOrderIndex));\n        }\n        return dataGroups;\n    };\n    Legend.prototype.addAdditionalItem = function (additionalItem, itemConfig, indexOfItem) {\n        var _a = Configuration.legend.area, width = _a.width, height = _a.height;\n        if (itemConfig.type === LegendItemType.RADIUS) {\n            var _b = Configuration.legend.radius, iconData = _b.iconData, fill = _b.fill, stroke = _b.stroke;\n            var circleEnter = additionalItem\n                .attr('fill', 'none')\n                .selectAll('circle')\n                .data(iconData)\n                .enter();\n            circleEnter\n                .append('circle')\n                .classed('radius', true)\n                .attr('role', Roles.IMG)\n                .attr('aria-label', 'radius')\n                .attr('cx', function (d) { return d.cx; })\n                .attr('cy', function (d) { return d.cy; })\n                .attr('r', function (d) { return d.r; })\n                .style('fill', itemConfig.fill ? itemConfig.fill : fill)\n                .style('stroke', itemConfig.stroke ? itemConfig.stroke : stroke);\n        }\n        else if (itemConfig.type === LegendItemType.LINE) {\n            var lineConfig = Configuration.legend.line;\n            if (additionalItem.select('line.line').empty()) {\n                additionalItem\n                    .append('line')\n                    .classed(\"line-\" + indexOfItem, true)\n                    .attr('role', Roles.IMG)\n                    .attr('aria-label', 'line')\n                    .attr('x1', 0)\n                    .attr('y1', lineConfig.yPosition)\n                    .attr('x2', width)\n                    .attr('y2', lineConfig.yPosition)\n                    .style('stroke', itemConfig.stroke\n                    ? itemConfig.stroke\n                    : lineConfig.stroke)\n                    .style('stroke-width', lineConfig.strokeWidth);\n            }\n        }\n        else if (itemConfig.type === LegendItemType.AREA) {\n            if (additionalItem.select('rect.area').empty()) {\n                additionalItem\n                    .append('rect')\n                    .classed(\"area-\" + indexOfItem, true)\n                    .attr('role', Roles.IMG)\n                    .attr('aria-label', 'area')\n                    .attr('width', width)\n                    .attr('height', height)\n                    .style('fill', indexOfItem > 3 && !itemConfig.fill\n                    ? Configuration.legend.area.fill\n                    : itemConfig.fill)\n                    .style('stroke', itemConfig.stroke);\n            }\n        }\n        else if (itemConfig.type === LegendItemType.SIZE) {\n            var _c = Configuration.legend.size, iconData = _c.iconData, fill = _c.fill, stroke = _c.stroke;\n            var sizeEnter = additionalItem\n                .attr('fill', 'none')\n                .attr('role', Roles.IMG)\n                .attr('aria-label', 'size')\n                .selectAll('rect')\n                .data(iconData)\n                .enter();\n            sizeEnter\n                .append('rect')\n                .classed('size', true)\n                .attr('width', function (d) { return d.width; })\n                .attr('height', function (d) { return d.height; })\n                .attr('y', function (d) { return 24 - d.height; })\n                .style('fill', itemConfig.fill ? itemConfig.fill : fill)\n                .style('stroke', itemConfig.stroke ? itemConfig.stroke : stroke)\n                .style('stroke-width', 1);\n        }\n        else if (itemConfig.type === LegendItemType.QUARTILE) {\n            var iconData = Configuration.legend.quartile.iconData;\n            var quartileEnter = additionalItem\n                .selectAll('rect')\n                .attr('role', Roles.IMG)\n                .attr('aria-label', 'quartile')\n                .data(iconData)\n                .enter();\n            quartileEnter\n                .append('rect')\n                .attr('class', function (d, i) { return \"quartile-\" + (i === 0 ? 'wrapper' : 'line'); })\n                .attr('x', function (d) { return d.x; })\n                .attr('y', function (d) { return d.y; })\n                .attr('width', function (d) { return d.width; })\n                .attr('height', function (d) { return d.height; });\n        }\n        else if (itemConfig.type === LegendItemType.ZOOM) {\n            var _d = Tools.getProperty(Configuration, 'legend', 'zoom'), iconData = _d.iconData, color_1 = _d.color;\n            var zoomEnter = additionalItem\n                .attr('role', Roles.IMG)\n                .attr('aria-label', 'zoom')\n                .selectAll('g.icon')\n                .data(iconData)\n                .enter();\n            // add '+' for the magnifying icon\n            zoomEnter\n                .append('g')\n                .attr('x', function (d) { return d.x; })\n                .attr('y', function (d) { return d.y; })\n                .attr('width', function (d) { return d.width; })\n                .attr('height', function (d) { return d.height; })\n                .append('polygon')\n                .attr('points', '7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82')\n                .attr('fill', function (d) {\n                return itemConfig.color ? itemConfig.color : color_1;\n            });\n            // add the magnifying zoom icon handle/circle\n            zoomEnter\n                .append('path')\n                .attr('d', 'M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z')\n                .attr('fill', function (d) {\n                return itemConfig.color ? itemConfig.color : color_1;\n            });\n        }\n    };\n    Legend.prototype.truncateLegendText = function (addedLegendItemsText) {\n        var trucationOptions = Tools.getProperty(this.getOptions(), 'legend', 'truncation');\n        // Truncation\n        // get user provided custom values for truncation\n        var truncationType = Tools.getProperty(trucationOptions, 'type');\n        var truncationThreshold = Tools.getProperty(trucationOptions, 'threshold');\n        var truncationNumCharacter = Tools.getProperty(trucationOptions, 'numCharacter');\n        // truncate the legend label if it's too long\n        if (truncationType !== TruncationTypes.NONE) {\n            addedLegendItemsText.html(function (d) {\n                if (d.name.length > truncationThreshold) {\n                    return Tools.truncateLabel(d.name, truncationType, truncationNumCharacter);\n                }\n                else {\n                    return d.name;\n                }\n            });\n        }\n        else {\n            addedLegendItemsText.html(function (d) { return d.name; });\n        }\n    };\n    Legend.prototype.breakItemsIntoLines = function (addedLegendItems, className, itemConfig) {\n        var self = this;\n        var svg = this.getContainerSVG();\n        // Check if there are disabled legend items\n        var DISABLED = Configuration.legend.items.status.DISABLED;\n        var dataGroups = this.model.getDataGroups();\n        var hasDeactivatedItems = dataGroups.some(function (dataGroup) { return dataGroup.status === DISABLED; });\n        addedLegendItems\n            .merge(svg.selectAll(\"g.\" + className))\n            .each(function (d) {\n            var legendItem = select(this);\n            var svgDimensions = DOMUtils.getSVGElementSize(self.parent, {\n                useAttr: true,\n            });\n            // Set item position based on item type\n            if (!d.type) {\n                itemConfig.hasDeactivatedItems = hasDeactivatedItems;\n                self.setLegendItemPosition(legendItem, svgDimensions, itemConfig, LegendItemType.CHECKBOX);\n            }\n            else {\n                self.setLegendItemPosition(legendItem, svgDimensions, itemConfig, d.type);\n            }\n        });\n    };\n    Legend.prototype.setLegendItemPosition = function (legendItem, parentSVGDimension, itemConfig, itemType) {\n        var legendOrientation = Tools.getProperty(this.getOptions(), 'legend', 'orientation');\n        // Configs\n        var legendItemsHorizontalSpacing = Configuration.legend.items.horizontalSpace;\n        var legendItemsVerticalSpacing = Configuration.legend.items.verticalSpace;\n        var legendTextYOffset = Configuration.legend.items.textYOffset;\n        var iconWidth = itemType === LegendItemType.CHECKBOX ||\n            itemType === LegendItemType.RADIUS ||\n            itemType === LegendItemType.ZOOM\n            ? Configuration.legend.checkbox.radius * 2\n            : Configuration.legend.area.width;\n        var spaceAfter = Configuration.legend.items.spaceAfter;\n        var legendItemTextDimensions = DOMUtils.getSVGElementSize(legendItem.select('text'), { useBBox: true });\n        var translateOffset = Configuration.legend.area.width / 2 - 1;\n        // Check and update position\n        if (itemConfig.itemIndexInLine === 0 ||\n            itemConfig.lastLegendItemTextWidth === 0 ||\n            legendOrientation === LegendOrientations.VERTICAL) {\n            if (itemConfig.itemIndexInLine > 0) {\n                itemConfig.lineNumber++;\n            }\n        }\n        else {\n            itemConfig.startingPoint +=\n                itemConfig.lastLegendItemTextWidth +\n                    iconWidth +\n                    spaceAfter +\n                    legendItemsHorizontalSpacing;\n            // Place legends in a new line if space is not enough\n            if (itemConfig.startingPoint +\n                iconWidth +\n                spaceAfter +\n                legendItemTextDimensions.width >\n                parentSVGDimension.width) {\n                itemConfig.lineNumber++;\n                itemConfig.startingPoint =\n                    iconWidth === 24 ? translateOffset : 0;\n                itemConfig.itemIndexInLine = 0;\n            }\n        }\n        itemConfig.lastLegendItemTextWidth = legendItemTextDimensions.width;\n        var yPosition = itemConfig.lineNumber * legendItemsVerticalSpacing;\n        var yTextPosition = legendTextYOffset + yPosition + 3;\n        if (itemType === LegendItemType.CHECKBOX) {\n            legendItem\n                .select('rect.checkbox')\n                .attr('x', itemConfig.startingPoint)\n                .attr('y', yPosition);\n            // Position text\n            legendItem\n                .select('text')\n                .attr('x', itemConfig.startingPoint + iconWidth + spaceAfter)\n                .attr('y', yTextPosition);\n            // Test if legendItems are placed in the correct direction\n            var testHorizontal = (!legendOrientation ||\n                legendOrientation === LegendOrientations.HORIZONTAL) &&\n                parseInt(legendItem.select('rect.checkbox').attr('y')) % 24 ===\n                    0;\n            var testVertical = legendOrientation === LegendOrientations.VERTICAL &&\n                legendItem.select('rect.checkbox').attr('x') === '0';\n            var hasCorrectLegendDirection = testHorizontal || testVertical;\n            // Render checkbox check icon\n            if (itemConfig.hasDeactivatedItems &&\n                legendItem.select('g.check').empty() &&\n                hasCorrectLegendDirection) {\n                legendItem.append('g').classed('check', true).html(\"\\n\\t\\t\\t\\t\\t\\t<svg focusable=\\\"false\\\" preserveAspectRatio=\\\"xMidYMid meet\\\"\\n\\t\\t\\t\\t\\t\\t\\txmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"32\\\" height=\\\"32\\\"\\n\\t\\t\\t\\t\\t\\t\\tviewBox=\\\"0 0 32 32\\\" aria-hidden=\\\"true\\\"\\n\\t\\t\\t\\t\\t\\t\\tstyle=\\\"will-change: transform;\\\">\\n\\t\\t\\t\\t\\t\\t\\t<path d=\\\"M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z\\\"></path>\\n\\t\\t\\t\\t\\t\\t\\t<title>Checkmark</title>\\n\\t\\t\\t\\t\\t\\t</svg>\\n\\t\\t\\t\\t\\t\");\n                legendItem\n                    .select('g.check svg')\n                    .attr('width', iconWidth - 1)\n                    .attr('height', iconWidth - 1)\n                    .attr('x', parseFloat(legendItem.select('rect.checkbox').attr('x')) + 0.5)\n                    .attr('y', parseFloat(legendItem.select('rect.checkbox').attr('y')) + 0.5);\n            }\n            else if (!itemConfig.hasDeactivatedItems &&\n                !legendItem.select('g.check').empty()) {\n                legendItem.select('g.check').remove();\n            }\n        }\n        else if (itemType === LegendItemType.RADIUS) {\n            legendItem\n                .selectAll('circle.radius')\n                .attr('cx', function (d) { return itemConfig.startingPoint + d.cx; })\n                .attr('cy', function (d) { return yPosition + d.cy; });\n            legendItem\n                .select('text')\n                .attr('x', itemConfig.startingPoint + iconWidth + spaceAfter)\n                .attr('y', yTextPosition);\n        }\n        else if (itemType === LegendItemType.SIZE) {\n            legendItem\n                .selectAll('g.icon')\n                .attr('transform', \"translate(\" + (itemConfig.startingPoint - translateOffset) + \", \" + (yPosition - 12) + \")\");\n            legendItem\n                .select('text')\n                .attr('x', itemConfig.startingPoint +\n                iconWidth +\n                spaceAfter -\n                translateOffset)\n                .attr('y', yTextPosition);\n        }\n        else if (itemType === LegendItemType.ZOOM) {\n            legendItem\n                .selectAll('g.icon')\n                .attr('transform', \"translate(\" + itemConfig.startingPoint + \", \" + yPosition + \")\");\n            legendItem\n                .select('text')\n                .attr('x', itemConfig.startingPoint + iconWidth + spaceAfter)\n                .attr('y', yTextPosition);\n        }\n        else {\n            legendItem\n                .selectAll('g.icon')\n                .attr('transform', \"translate(\" + (itemConfig.startingPoint - translateOffset) + \", \" + yPosition + \")\");\n            legendItem\n                .select('text')\n                .attr('x', itemConfig.startingPoint +\n                iconWidth +\n                spaceAfter -\n                translateOffset)\n                .attr('y', yTextPosition);\n        }\n        itemConfig.itemIndexInLine++;\n    };\n    Legend.prototype.addEventListeners = function () {\n        var self = this;\n        var svg = this.getContainerSVG();\n        var options = this.getOptions();\n        var legendOptions = Tools.getProperty(options, 'legend');\n        var truncationThreshold = Tools.getProperty(legendOptions, 'truncation', 'threshold');\n        svg.selectAll('g.legend-item')\n            .on('mouseover', function () {\n            self.services.events.dispatchEvent(Events.Legend.ITEM_HOVER, {\n                hoveredElement: select(this),\n            });\n            // Configs\n            var checkboxRadius = Configuration.legend.checkbox.radius;\n            var hoveredItem = select(this);\n            hoveredItem.select('rect.checkbox').classed('hovered', true);\n            hoveredItem\n                .append('rect')\n                .classed('hover-stroke', true)\n                .attr('x', parseFloat(hoveredItem.select('rect.checkbox').attr('x')) - 2)\n                .attr('y', parseFloat(hoveredItem.select('rect.checkbox').attr('y')) - 2)\n                .attr('width', checkboxRadius * 2 + 4)\n                .attr('height', checkboxRadius * 2 + 4)\n                .attr('rx', 3)\n                .attr('ry', 3)\n                .lower();\n            var hoveredItemData = hoveredItem.datum();\n            if (hoveredItemData.name.length > truncationThreshold) {\n                self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n                    hoveredElement: hoveredItem,\n                    content: hoveredItemData.name,\n                });\n            }\n        })\n            .on('mousemove', function () {\n            self.services.events.dispatchEvent(Events.Tooltip.MOVE);\n        })\n            .on('click', function () {\n            self.services.events.dispatchEvent(Events.Legend.ITEM_CLICK, {\n                clickedElement: select(this),\n            });\n            var clickedItem = select(this);\n            var clickedItemData = clickedItem.datum();\n            self.model.toggleDataLabel(clickedItemData.name);\n        })\n            .on('mouseout', function () {\n            var hoveredItem = select(this);\n            hoveredItem.select('rect.hover-stroke').remove();\n            hoveredItem.select('rect.checkbox').classed('hovered', false);\n            self.services.events.dispatchEvent(Events.Tooltip.HIDE);\n            self.services.events.dispatchEvent(Events.Legend.ITEM_MOUSEOUT, {\n                hoveredElement: hoveredItem,\n            });\n        });\n        svg.selectAll('g.legend-item rect.checkbox').on('keyup', function (d) {\n            if (event.key && (event.key === 'Enter' || event.key === ' ')) {\n                event.preventDefault();\n                self.model.toggleDataLabel(d.name);\n            }\n        });\n        svg.selectAll('g.additional-item').on('mouseover', function () {\n            var hoveredItem = select(this);\n            var hoveredItemData = hoveredItem.datum();\n            if (hoveredItemData.name.length > truncationThreshold) {\n                self.services.events.dispatchEvent(Events.Tooltip.SHOW, {\n                    hoveredElement: hoveredItem,\n                    content: hoveredItemData.name,\n                });\n            }\n        });\n    };\n    return Legend;\n}(Component));\nexport { Legend };\n//# sourceMappingURL=../../../src/components/essentials/legend.js.map"]},"metadata":{},"sourceType":"module"}